<!DOCTYPE html>
<html lang="en" platform="win" class="theme-light" dir="ltr">

<head>
  <base href="/">
  <meta http-equiv="Content-Type" content="application/json; charset=utf-8">
  <meta http-equiv="Content-Encoding" content="br">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">

  <link rel="stylesheet" type="text/css" href="chrome://devtools-jsonview-styles/content/main.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

  <title>JSON Viewer</title>
</head>

<body>
  <div class="container-fluid">
    <main class="my-3">
      <div class="row mb-3">
        <div class="col input-group">
          <div class="input-group-prepend">
            <span class="input-group-text">url</span>
          </div>
          <input id="url" type="text" class="form-control" placeholder="url">
        </div>
        <div class="col-auto">
          <button id="btn-reset" type="button" class="btn btn-danger">RESET</button>
          <button id="btn-get" type="button" class="btn btn-info">GET</button>
        </div>
      </div>
      <div id="fathor" class="row">
        <div id="content" class="col"></div>
      </div>
    </main>
  </div>
  <script>
    (function () {
      function locationRefresh() {
        location.assign(location.href);
      }

      if (navigator.userAgent.includes("Firefox")) {

        if (!localStorage.getItem("json")) {
          let json = {};
          localStorage.setItem("json", JSON.stringify(json));
        }

        window.JSONView = {
          "debugJsModules": false,
          "headers": {
            "response": Array.from(document.querySelectorAll('meta')).flatMap(elem => elem.httpEquiv ? [{ "name": elem.httpEquiv, "value": elem.content }] : []),
            "request": [
              { "name": "Host", "value": "github.io" },
              { "name": "User-Agent", "value": navigator.userAgent },
              { "name": "Accept", "value": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8" },
              { "name": "Accept-Language", "value": "en-US,en;q=0.5" },
              { "name": "Accept-Encoding", "value": "gzip, deflate, br" },
              { "name": "Connection", "value": "keep-alive" },
            ]
          },
          "json": new Text(localStorage.getItem("json")),
          "readyState": "uninitialized",
          "Locale": {
            "jsonViewer.Copy": "Copy",
            "jsonViewer.requestHeaders": "Request Headers",
            "jsonViewer.CollapseAll": "Collapse All",
            "jsonViewer.PrettyPrint": "Pretty Print",
            "jsonViewer.tab.Headers": "Headers",
            "jsonViewer.ExpandAll": "Expand All",
            "jsonViewer.tab.RawData": "Raw Data",
            "jsonViewer.tab.JSON": "JSON",
            "jsonViewer.responseHeaders": "Response Headers",
            "jsonViewer.ExpandAllSlow": "Expand All (slow)",
            "jsonViewer.filterJSON": "Filter JSON",
            "jsonViewer.Save": "Save",
          },
        };

        document.getElementById("btn-reset").addEventListener("click", function () {
          localStorage.setItem("json", JSON.stringify({}));
          locationRefresh();
        });

        document.getElementById("btn-get").addEventListener("click", function () {
          fetch(document.getElementById("url").value)
            .then(response => response.json())
            .then(data => {
              localStorage.setItem("json", JSON.stringify(data));
              locationRefresh();
            });
        });

      } // navigator.userAgent.includes("Firefox")

    })();
  </script>
  <script src="resource://devtools-client-jsonview/lib/require.js" data-main="resource://devtools-client-jsonview/viewer-config.js"></script>
</body>

</html>